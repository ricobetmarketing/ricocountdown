<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rico.bet VIP Day ‚Äî Treasure Hunt</title>

  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Special+Elite&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0604;
      --paper:#f2e3c9;
      --ink:#3d2b1f;
      --accent:#8b0000;
      --gold:#ffd166;
      --emerald:#22c55e;
      --cyan:#22d3ee;

      --glass: rgba(255,255,255,.08);
      --glassBorder: rgba(255,255,255,.14);
      --shadow: 0 25px 70px rgba(0,0,0,.65);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:'Special Elite', ui-monospace, monospace;
      background:
        radial-gradient(900px 500px at 50% -10%, rgba(255,209,102,.18), transparent 60%),
        radial-gradient(700px 400px at 15% 20%, rgba(34,211,238,.14), transparent 60%),
        radial-gradient(800px 500px at 85% 70%, rgba(34,197,94,.12), transparent 60%),
        linear-gradient(180deg, #050302 0%, #110905 50%, #050302 100%);
      color:#f6ead7;
      overflow-x:hidden;
    }

    /* subtle particles */
    .dust{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.22;
      background-image:
        radial-gradient(circle at 10% 10%, rgba(255,255,255,.22) 0 1px, transparent 2px),
        radial-gradient(circle at 40% 30%, rgba(255,255,255,.16) 0 1px, transparent 2px),
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.18) 0 1px, transparent 2px),
        radial-gradient(circle at 20% 80%, rgba(255,255,255,.14) 0 1px, transparent 2px),
        radial-gradient(circle at 90% 20%, rgba(255,255,255,.12) 0 1px, transparent 2px);
      filter: blur(.2px);
      animation: drift 10s linear infinite;
    }
    @keyframes drift{ 0%,100%{ transform:translateY(0);} 50%{ transform:translateY(10px);} }

    .app{
      width:min(1060px, 100%);
      margin:0 auto;
      padding: 18px 14px 90px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    /* HUD */
    .hud{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin-top:6px;
    }
    .chip{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      background:var(--glass);
      border:1px solid var(--glassBorder);
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex;
      flex-direction:column;
      line-height:1.1;
    }
    .brand .t{
      font-family:'Cinzel', serif;
      font-weight:700;
      letter-spacing:.8px;
      font-size:16px;
    }
    .brand .s{
      font-size:12px;
      opacity:.78;
    }

    .xp{
      flex:1;
      min-width:260px;
      max-width:560px;
    }
    .xpTop{
      display:flex;
      justify-content:space-between;
      gap:10px;
      font-size:12px;
      opacity:.9;
      margin-bottom:6px;
    }
    .bar{
      height:12px;
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      border-radius:999px;
      overflow:hidden;
    }
    .bar i{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,209,102,.95), rgba(34,211,238,.85));
      border-radius:999px;
      transition: width .6s ease;
      box-shadow: 0 0 25px rgba(255,209,102,.35);
    }

    .btn{
      border:none;
      cursor:pointer;
      font-family:'Cinzel', serif;
      font-weight:700;
      letter-spacing:.5px;
      border-radius:16px;
      padding:12px 14px;
      color:#0b0604;
      background: linear-gradient(180deg, #ffe8a3, var(--gold));
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      transition: transform .15s ease, filter .15s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); filter:brightness(1.03); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btnGhost{
      background:rgba(255,255,255,.06);
      color:#f6ead7;
      border:1px solid rgba(255,255,255,.14);
      box-shadow:none;
    }
    .btnGhost:hover{ filter:brightness(1.1); }

    /* content cards */
    .card{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }

    /* tabs / router buttons */
    .tabs{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      padding:12px;
      align-items:center;
      justify-content:space-between;
    }
    .tabRow{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }
    .tab{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color:#fff;
      cursor:pointer;
      font-size:13px;
      opacity:.85;
      transition: transform .15s ease, opacity .15s ease, filter .15s ease;
      user-select:none;
    }
    .tab:hover{ transform:translateY(-1px); opacity:1; filter:brightness(1.05); }
    .tab.active{
      background: rgba(255,209,102,.18);
      border-color: rgba(255,209,102,.35);
      opacity:1;
    }

    /* pages */
    .page{
      display:none;
      padding:16px;
    }
    .page.active{ display:block; }

    /* parchment block */
    .parchment{
      background: var(--paper);
      color: var(--ink);
      border:2px solid #5a4b3f;
      border-radius: var(--radius);
      padding:16px;
      box-shadow: inset 0 0 110px rgba(0,0,0,.18);
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpath fill='%233d2b1f' fill-opacity='0.06' d='M1 5h1v1H1V5zm3-3h1v1H4V2zM0 1h1v1H0V1z'%3E%3C/path%3E%3C/svg%3E");
    }

    .hero{
      padding:18px 16px;
      text-align:center;
    }
    .hero h1{
      margin:0 0 10px;
      font-family:'Cinzel', serif;
      letter-spacing:1px;
      font-size: clamp(1.4rem, 3.4vw, 2.35rem);
    }
    .hero p{
      margin:0 auto;
      max-width: 820px;
      color: rgba(61,43,31,.7);
      line-height:1.4;
      font-size: .98rem;
    }
    .hero .cta{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }

    /* map + panel layout */
    .grid{
      display:grid;
      grid-template-columns: 1.3fr .9fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width: 900px){ .grid{ grid-template-columns:1fr; } }

    .map{
      position:relative;
      height: 410px;
      border-radius: 18px;
      overflow:hidden;
      border:3px solid var(--ink);
      background:#e4d5b7;
      box-shadow: inset 0 0 55px rgba(0,0,0,.14);
    }
    .map svg{ width:100%; height:100%; display:block; }
    .map:after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(500px 200px at 18% 10%, rgba(0,0,0,.05), transparent 60%),
        radial-gradient(500px 220px at 82% 85%, rgba(0,0,0,.06), transparent 55%);
      pointer-events:none;
    }

    .hotspot{
      position:absolute;
      width:56px; height:56px;
      border-radius:50%;
      border:2px dashed rgba(139,0,0,.55);
      background: rgba(255,255,255,.12);
      cursor:pointer;
      display:grid;
      place-items:center;
      z-index:6;
      transition: transform .15s ease, filter .15s ease, border-color .2s ease;
      backdrop-filter: blur(2px);
      animation: ping 2.2s infinite ease-in-out;
      user-select:none;
    }
    .hotspot:hover{ transform: scale(1.06); filter: brightness(1.05); border-color: rgba(139,0,0,.85); }
    .hotspot:active{ transform: scale(0.98); }
    .hotspot span{
      font-family:'Cinzel', serif;
      font-weight:700;
      color: var(--accent);
      text-shadow: 0 0 12px rgba(139,0,0,.25);
      font-size: 18px;
    }
    .hotspot.done{
      border-color: rgba(34,197,94,.6);
      background: rgba(34,197,94,.12);
      animation:none;
    }
    .hotspot.done span{ color: rgba(34,197,94,.95); text-shadow:none; }

    @keyframes ping{
      0%{ box-shadow: 0 0 0 0 rgba(139,0,0,.25); }
      60%{ box-shadow: 0 0 0 14px rgba(139,0,0,0); }
      100%{ box-shadow: 0 0 0 0 rgba(139,0,0,0); }
    }

    .tooltip{
      position:absolute;
      left:50%;
      top:-10px;
      transform: translate(-50%, -100%);
      background: rgba(17, 24, 39, .92);
      color:#fff;
      padding:8px 10px;
      border-radius:12px;
      font-size:12px;
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      border:1px solid rgba(255,255,255,.14);
    }
    .hotspot:hover .tooltip{
      opacity:1;
      transform: translate(-50%, -110%);
    }

    /* side panel */
    .panel{
      border-radius:18px;
      border:2px dashed rgba(61,43,31,.35);
      background: rgba(0,0,0,.03);
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height: 410px;
    }
    .panel h2{
      margin:0;
      font-family:'Cinzel', serif;
      font-size: 1.05rem;
      letter-spacing:.6px;
      color: var(--accent);
    }
    .steps{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .step{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px;
      border-radius:14px;
      border:1px solid rgba(61,43,31,.25);
      background: rgba(255,255,255,.35);
      transition: filter .15s ease;
    }
    .step.done{
      border-color: rgba(34,197,94,.35);
      background: rgba(34,197,94,.10);
    }
    .dot{
      width:30px; height:30px;
      border-radius:11px;
      display:grid; place-items:center;
      font-weight:800;
      background: rgba(61,43,31,.10);
      border:1px solid rgba(61,43,31,.20);
      user-select:none;
    }
    .step.done .dot{
      background: rgba(34,197,94,.18);
      border-color: rgba(34,197,94,.35);
    }
    .meta{ font-size:.9rem; line-height:1.25; }
    .meta strong{
      display:block;
      margin-bottom:4px;
      font-family:'Cinzel', serif;
      letter-spacing:.4px;
    }
    .meta small{ color: rgba(61,43,31,.70); }

    .hintbox{
      display:none;
      border-radius:14px;
      padding:10px 12px;
      border:1px solid rgba(34,211,238,.35);
      background: rgba(34,211,238,.10);
      font-size:.9rem;
      color: rgba(61,43,31,.9);
    }
    .hintbox b{ font-family:'Cinzel', serif; }

    /* gallery scenes */
    .galleryHead{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin: 4px 0 12px;
    }
    .galleryHead h2{
      margin:0;
      font-family:'Cinzel', serif;
      letter-spacing:.6px;
      color: rgba(61,43,31,.9);
      font-size: 1.2rem;
    }
    .galleryHead p{
      margin:0;
      color: rgba(61,43,31,.65);
      font-size: .95rem;
      max-width: 520px;
    }

    .scenes{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
    }
    @media (max-width: 900px){ .scenes{ grid-template-columns:1fr; } }

    .scene{
      position:relative;
      height: 260px;
      border-radius: 18px;
      overflow:hidden;
      border:2px solid rgba(61,43,31,.35);
      box-shadow: inset 0 0 70px rgba(0,0,0,.10);
      background: #e9d7ba;
      cursor: crosshair;
    }

    /* custom ‚Äúdesigned‚Äù backgrounds (SVG-like via CSS gradients) */
    .scene.s1{
      background:
        radial-gradient(240px 160px at 25% 35%, rgba(139,0,0,.10), transparent 60%),
        radial-gradient(260px 180px at 75% 60%, rgba(34,211,238,.10), transparent 60%),
        linear-gradient(180deg, #ecd9bd 0%, #e4d0ae 70%, #d6bf98 100%);
    }
    .scene.s2{
      background:
        radial-gradient(260px 180px at 70% 35%, rgba(34,197,94,.12), transparent 60%),
        radial-gradient(220px 140px at 25% 70%, rgba(0,0,0,.08), transparent 60%),
        linear-gradient(180deg, #efe0c7 0%, #e7d3b2 75%, #d7c09a 100%);
    }
    .scene.s3{
      background:
        radial-gradient(240px 160px at 30% 30%, rgba(0,0,0,.09), transparent 60%),
        radial-gradient(260px 180px at 80% 70%, rgba(139,0,0,.08), transparent 60%),
        linear-gradient(180deg, #ede0c8 0%, #e6d2b2 70%, #d4bb94 100%);
    }
    .scene.s4{
      background:
        radial-gradient(260px 180px at 20% 60%, rgba(34,211,238,.12), transparent 60%),
        radial-gradient(240px 160px at 80% 30%, rgba(255,209,102,.16), transparent 60%),
        linear-gradient(180deg, #efe3cb 0%, #e8d7b9 70%, #d8c19b 100%);
    }

    .sceneLabel{
      position:absolute;
      left:12px; top:12px;
      padding:8px 10px;
      border-radius:14px;
      background: rgba(0,0,0,.15);
      border:1px solid rgba(0,0,0,.18);
      color: rgba(61,43,31,.9);
      font-size: 12px;
      backdrop-filter: blur(2px);
      display:flex;
      gap:8px;
      align-items:center;
      user-select:none;
    }
    .sceneLabel b{
      font-family:'Cinzel', serif;
      letter-spacing:.5px;
      color: rgba(61,43,31,.95);
    }

    /* the mascot (your image) hidden around */
    .mascot{
      position:absolute;
      width:46px;
      height:auto;
      transform-origin:center;
      filter: drop-shadow(0 10px 15px rgba(0,0,0,.25));
      opacity:.18; /* make it ‚Äúhidden‚Äù */
      transition: opacity .15s ease, transform .15s ease, filter .15s ease;
      user-select:none;
      -webkit-user-drag:none;
      cursor:pointer;
      border-radius:12px;
    }
    .mascot:hover{
      opacity:.55;
      transform: scale(1.05) rotate(1deg);
      filter: drop-shadow(0 14px 18px rgba(0,0,0,.32));
    }
    .mascot.found{
      opacity:1;
      transform: scale(1.07);
      outline: 2px solid rgba(34,197,94,.55);
      background: rgba(34,197,94,.10);
    }

    /* redeem */
    .redeem{
      margin-top: 12px;
      border-top: 1px solid rgba(0,0,0,.12);
      padding-top: 14px;
      text-align:center;
    }
    .redeem h2{
      margin: 0 0 10px;
      font-family:'Cinzel', serif;
      color: rgba(61,43,31,.9);
      letter-spacing:.6px;
      font-size:1.2rem;
    }
    .redeemRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    input{
      padding:12px 12px;
      width:min(340px, 90vw);
      border:1px solid var(--ink);
      border-radius:16px;
      background: transparent;
      font-family:'Special Elite', ui-monospace, monospace;
      font-size: 1.05rem;
      text-align:center;
      outline:none;
      color: var(--ink);
    }
    input:focus{
      box-shadow: 0 0 0 4px rgba(255,209,102,.25);
      border-color: rgba(139,0,0,.45);
    }

    .micro{
      font-size:4px;
      opacity:.06;
      margin-top:10px;
      user-select:text;
      color: rgba(61,43,31,.6);
    }

    /* overlays */
    .overlay{
      display:none;
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.92);
      z-index:1000;
      align-items:center;
      justify-content:center;
      padding:22px 14px;
    }
    .overlay.show{ display:flex; }

    .modal{
      width:min(820px, 100%);
      border-radius:22px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 30px 100px rgba(0,0,0,.6);
      backdrop-filter: blur(10px);
      color:#f6ead7;
      overflow:hidden;
    }
    .modal header{
      padding:18px 18px 12px;
      border-bottom:1px solid rgba(255,255,255,.12);
      text-align:center;
    }
    .modal header h3{
      margin:0;
      font-family:'Cinzel', serif;
      letter-spacing:1px;
      font-size: 1.35rem;
    }
    .modal header p{
      margin:8px 0 0;
      opacity:.85;
      font-size:.95rem;
      line-height:1.35;
    }
    .modal .content{
      padding:16px 18px;
      display:grid;
      gap:10px;
    }
    .modal .content .mcard{
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      line-height:1.35;
      font-size:.95rem;
    }
    .modal .content .mcard b{
      color: var(--gold);
      font-family:'Cinzel', serif;
      letter-spacing:.6px;
    }
    .modal footer{
      padding:14px 18px;
      display:flex;
      justify-content:center;
      gap:10px;
      border-top:1px solid rgba(255,255,255,.12);
      flex-wrap:wrap;
    }

    /* reward chest */
    .chest{
      margin: 12px auto 4px;
      width:150px;
      height:115px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,209,102,.98), rgba(255,209,102,.65));
      box-shadow: 0 18px 50px rgba(0,0,0,.45);
      position:relative;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.2);
    }
    .chest:before{
      content:"";
      position:absolute;
      left:0; right:0;
      top:45%;
      height:12px;
      background: rgba(0,0,0,.18);
    }
    .chest:after{
      content:"";
      position:absolute;
      width:44px; height:44px;
      border-radius:14px;
      left:50%; top:50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,.18);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.18);
    }
    .codebox{
      display:inline-block;
      margin-top: 10px;
      padding: 14px 18px;
      border-radius:18px;
      border: 2px dashed rgba(255,209,102,.95);
      background: rgba(0,0,0,.25);
      font-size: clamp(1.2rem, 3.5vw, 2rem);
      letter-spacing:1px;
      color: #ffe8a3;
      user-select: all;
      cursor:pointer;
    }
    .rewardText{
      margin: 8px 0 0;
      font-size: 1.1rem;
      opacity:.95;
      text-align:center;
    }

    /* toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform: translateX(-50%);
      background: rgba(17,24,39,.92);
      color:#fff;
      border:1px solid rgba(255,255,255,.14);
      border-radius:14px;
      padding:10px 12px;
      font-size: 13px;
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      z-index:2000;
      max-width: 92vw;
      text-align:center;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-4px);
    }
  </style>
</head>

<body>
  <div class="dust"></div>

  <div class="app">

    <!-- HUD -->
    <div class="hud">
      <div class="chip">
        <div class="brand">
          <div class="t">Rico.bet VIP Day ‚Äî Treasure Hunt</div>
          <div class="s">Find mascot ‚Ä¢ Collect fragments ‚Ä¢ Redeem rewards</div>
        </div>
      </div>

      <div class="chip xp" aria-live="polite">
        <div style="width:100%">
          <div class="xpTop">
            <div>Level <b id="lvl">1</b> ‚Ä¢ XP <b id="xpTxt">0</b>/<b id="xpMaxTxt">100</b></div>
            <div>Fragments <b id="fragCnt">0</b>/<b id="fragNeed">3</b> ‚Ä¢ Mascots <b id="masCnt">0</b>/<b id="masNeed">4</b></div>
          </div>
          <div class="bar"><i id="xpBar"></i></div>
        </div>
      </div>

      <div class="chip">
        <button class="btn btnGhost" id="btnBrief">Mission Brief</button>
        <button class="btn" id="btnReset">Reset</button>
      </div>
    </div>

    <!-- NAV / TABS -->
    <div class="card">
      <div class="tabs">
        <div class="tabRow">
          <div class="tab active" data-go="home">Home</div>
          <div class="tab" data-go="map">Treasure Map</div>
          <div class="tab" data-go="gallery">Mascot Hunt</div>
          <div class="tab" data-go="redeem">Redeem</div>
        </div>
        <div class="tabRow">
          <button class="btn btnGhost" id="btnHint">Use Hint (<span id="hintLeft">2</span>)</button>
          <button class="btn btnGhost" id="btnCopy">Copy Progress</button>
        </div>
      </div>
    </div>

    <!-- PAGES -->
    <div class="card">
      <!-- HOME -->
      <div class="page active" id="page-home">
        <div class="parchment">
          <div class="hero">
            <h1>Mission: The Secret Island Hunt</h1>
            <p>
              VIP Explorer, your goal is to collect <b>3 code fragments</b> from the Treasure Map and find
              <b>4 hidden mascots</b> across the hunt images. Once you have enough, redeem your reward.
            </p>
            <div class="cta">
              <button class="btn" onclick="go('map')">Start: Treasure Map</button>
              <button class="btn btnGhost" onclick="go('gallery')">Start: Mascot Hunt</button>
            </div>
          </div>

          <div style="display:grid; gap:12px; grid-template-columns: repeat(3, 1fr); padding: 0 10px 12px;">
            <div class="stepCard" style="border:1px dashed rgba(61,43,31,.35); border-radius:16px; padding:12px; background: rgba(0,0,0,.03);">
              <div style="font-family:'Cinzel',serif; color: var(--accent); font-weight:700;">Step 1</div>
              <div style="margin-top:6px; color: rgba(61,43,31,.75); font-size:.95rem;">Tap hotspots on the map to collect fragments.</div>
            </div>
            <div class="stepCard" style="border:1px dashed rgba(61,43,31,.35); border-radius:16px; padding:12px; background: rgba(0,0,0,.03);">
              <div style="font-family:'Cinzel',serif; color: var(--accent); font-weight:700;">Step 2</div>
              <div style="margin-top:6px; color: rgba(61,43,31,.75); font-size:.95rem;">Find Rico.bet mascot hidden in images.</div>
            </div>
            <div class="stepCard" style="border:1px dashed rgba(61,43,31,.35); border-radius:16px; padding:12px; background: rgba(0,0,0,.03);">
              <div style="font-family:'Cinzel',serif; color: var(--accent); font-weight:700;">Step 3</div>
              <div style="margin-top:6px; color: rgba(61,43,31,.75); font-size:.95rem;">Combine clues, enter code, open chest.</div>
            </div>
          </div>

          <p class="micro">TINY_VOUCHER_2026</p>
        </div>
      </div>

      <!-- MAP -->
      <div class="page" id="page-map">
        <div class="parchment">
          <div style="display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; padding:6px 8px 14px;">
            <div>
              <div style="font-family:'Cinzel',serif; font-weight:700; letter-spacing:.6px; font-size:1.2rem; color: rgba(61,43,31,.92);">
                Treasure Map
              </div>
              <div style="color: rgba(61,43,31,.65); font-size:.95rem;">
                Tap the glowing hotspots to collect fragments (A / B / C).
              </div>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn btnGhost" onclick="go('gallery')">Go: Mascot Hunt</button>
              <button class="btn" onclick="go('redeem')">Go: Redeem</button>
            </div>
          </div>

          <div class="grid">
            <div class="map" id="map">
              <svg viewBox="0 0 800 410" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <!-- ocean lines -->
                <path d="M0 60 Q 70 50 140 60 T 280 60 T 420 60" stroke="#3d2b1f" stroke-opacity="0.10" fill="none"/>
                <path d="M380 360 Q 470 350 560 360 T 740 360" stroke="#3d2b1f" stroke-opacity="0.10" fill="none"/>

                <!-- islands -->
                <path d="M110 190 Q 160 95 270 140 T 345 230 Q 300 345 170 290 Z" fill="#d2bc96" stroke="#3d2b1f" stroke-width="2"/>
                <path d="M540 120 Q 670 60 745 185 T 620 300 Q 500 235 540 120 Z" fill="#d2bc96" stroke="#3d2b1f" stroke-width="2"/>

                <!-- route -->
                <path d="M240 230 C 340 305, 470 110, 610 220" stroke="#8b0000" stroke-width="2.3" stroke-dasharray="8,5" fill="none" opacity="0.6"/>

                <!-- compass -->
                <g transform="translate(720, 80) scale(0.62)">
                  <circle cx="0" cy="0" r="52" stroke="#3d2b1f" fill="none"/>
                  <path d="M0 -62 L 0 62 M -62 0 L 62 0" stroke="#3d2b1f"/>
                  <text x="-8" y="-70" font-family="Cinzel" font-size="24">N</text>
                </g>

                <text x="145" y="225" font-family="Special Elite" font-size="14" opacity="0.55">Monkey Mountain</text>
                <text x="575" y="190" font-family="Special Elite" font-size="14" opacity="0.55">Danger Zone</text>
                <text x="310" y="55" font-family="Special Elite" font-size="18" opacity="0.26" letter-spacing="5">SILVER OCEAN</text>

                <circle cx="70" cy="315" r="18" fill="#3d2b1f" opacity="0.06"/>
                <circle cx="92" cy="325" r="10" fill="#3d2b1f" opacity="0.04"/>
                <circle cx="650" cy="350" r="16" fill="#3d2b1f" opacity="0.05"/>
              </svg>

              <!-- HOTSPOTS: fragments A/B/C -->
              <div class="hotspot" id="hsA" style="left: 17%; top: 58%;" data-frag="RI" data-key="fragA">
                <div class="tooltip">Hotspot A ‚Ä¢ Fragment: RI</div>
                <span>A</span>
              </div>

              <div class="hotspot" id="hsB" style="left: 46%; top: 48%;" data-frag="CO" data-key="fragB">
                <div class="tooltip">Hotspot B ‚Ä¢ Fragment: CO</div>
                <span>B</span>
              </div>

              <div class="hotspot" id="hsC" style="left: 74%; top: 64%;" data-frag="77" data-key="fragC">
                <div class="tooltip">Hotspot C ‚Ä¢ Fragment: 77</div>
                <span>C</span>
              </div>
            </div>

            <aside class="panel">
              <h2>Objective Tracker</h2>

              <div class="steps">
                <div class="step" id="stA">
                  <div class="dot">A</div>
                  <div class="meta">
                    <strong>Collect Fragment A</strong>
                    <small>Find the first hotspot.</small>
                  </div>
                </div>

                <div class="step" id="stB">
                  <div class="dot">B</div>
                  <div class="meta">
                    <strong>Collect Fragment B</strong>
                    <small>Find the second hotspot.</small>
                  </div>
                </div>

                <div class="step" id="stC">
                  <div class="dot">C</div>
                  <div class="meta">
                    <strong>Collect Fragment C</strong>
                    <small>Find the third hotspot.</small>
                  </div>
                </div>

                <div class="step" id="stM">
                  <div class="dot">‚òÖ</div>
                  <div class="meta">
                    <strong>Find Mascots</strong>
                    <small>Go to Mascot Hunt and find 4.</small>
                  </div>
                </div>
              </div>

              <div class="hintbox" id="hintbox"></div>

              <div style="margin-top:auto; display:flex; gap:10px; flex-wrap:wrap;">
                <button class="btn btnGhost" onclick="go('gallery')">Mascot Hunt</button>
                <button class="btn" onclick="go('redeem')">Redeem</button>
              </div>

              <div style="font-size:12px;color:rgba(61,43,31,.6);">
                Tip: Each fragment gives XP. Collect all 3 to craft the code.
              </div>
            </aside>
          </div>
        </div>
      </div>

      <!-- GALLERY / MASCOT HUNT -->
      <div class="page" id="page-gallery">
        <div class="parchment">
          <div class="galleryHead">
            <div>
              <h2>Mascot Hunt</h2>
              <p>Find Rico.bet mascot hidden in each scene. Tap the mascot to collect a stamp.</p>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn btnGhost" onclick="go('map')">Back to Map</button>
              <button class="btn" onclick="go('redeem')">Go Redeem</button>
            </div>
          </div>

          <div class="scenes">
            <!-- Scene 1 -->
            <div class="scene s1" data-scene="1">
              <div class="sceneLabel"><b>Scene 1</b> ‚Ä¢ ‚ÄúDock of Secrets‚Äù</div>
              <!-- Decorative lines -->
              <svg viewBox="0 0 100 60" style="position:absolute; inset:auto 10px 10px auto; width:120px; opacity:.18;" aria-hidden="true">
                <path d="M0 10 Q 15 7 30 10 T 60 10 T 90 10" stroke="#3d2b1f" fill="none" />
                <path d="M0 30 Q 15 27 30 30 T 60 30 T 90 30" stroke="#3d2b1f" fill="none" />
              </svg>
              <img class="mascot" id="m1" alt="Rico.bet Mascot"
                src="https://ricobr.ft-crm.com/media-api/serve/9cc65950-210b-4f56-995f-e4a94dd1d82c_2.png"
                style="left: 78%; top: 64%; width:40px; transform: rotate(-8deg) scale(0.92);"
                data-mkey="m1" />
            </div>

            <!-- Scene 2 -->
            <div class="scene s2" data-scene="2">
              <div class="sceneLabel"><b>Scene 2</b> ‚Ä¢ ‚ÄúJungle Whisper‚Äù</div>
              <svg viewBox="0 0 200 100" style="position:absolute; left:-20px; bottom:-30px; width:240px; opacity:.12;" aria-hidden="true">
                <path d="M20 90 C 40 40, 70 30, 90 90 S 140 130, 160 60" stroke="#3d2b1f" fill="none" stroke-width="3"/>
              </svg>
              <img class="mascot" id="m2" alt="Rico.bet Mascot"
                src="https://ricobr.ft-crm.com/media-api/serve/9cc65950-210b-4f56-995f-e4a94dd1d82c_2.png"
                style="left: 12%; top: 20%; width:34px; transform: rotate(11deg) scale(0.88);"
                data-mkey="m2" />
            </div>

            <!-- Scene 3 -->
            <div class="scene s3" data-scene="3">
              <div class="sceneLabel"><b>Scene 3</b> ‚Ä¢ ‚ÄúCave of Echoes‚Äù</div>
              <svg viewBox="0 0 120 80" style="position:absolute; right:-10px; bottom:-10px; width:170px; opacity:.15;" aria-hidden="true">
                <path d="M10 70 Q 40 15 75 55 T 110 25" stroke="#3d2b1f" fill="none" stroke-width="3"/>
              </svg>
              <img class="mascot" id="m3" alt="Rico.bet Mascot"
                src="https://ricobr.ft-crm.com/media-api/serve/9cc65950-210b-4f56-995f-e4a94dd1d82c_2.png"
                style="left: 52%; top: 10%; width:30px; transform: rotate(-3deg) scale(0.82);"
                data-mkey="m3" />
            </div>

            <!-- Scene 4 -->
            <div class="scene s4" data-scene="4">
              <div class="sceneLabel"><b>Scene 4</b> ‚Ä¢ ‚ÄúGolden Tide‚Äù</div>
              <svg viewBox="0 0 220 80" style="position:absolute; left:10px; top:42px; width:240px; opacity:.12;" aria-hidden="true">
                <path d="M0 20 Q 40 10 80 20 T 160 20 T 220 20" stroke="#3d2b1f" fill="none" stroke-width="2"/>
                <path d="M0 45 Q 40 35 80 45 T 160 45 T 220 45" stroke="#3d2b1f" fill="none" stroke-width="2"/>
              </svg>
              <img class="mascot" id="m4" alt="Rico.bet Mascot"
                src="https://ricobr.ft-crm.com/media-api/serve/9cc65950-210b-4f56-995f-e4a94dd1d82c_2.png"
                style="left: 86%; top: 16%; width:28px; transform: rotate(6deg) scale(0.78);"
                data-mkey="m4" />
            </div>
          </div>

          <div class="redeem" style="margin-top:14px;">
            <h2>Your Stamps</h2>
            <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:center;">
              <div style="padding:10px 12px; border-radius:16px; border:1px dashed rgba(61,43,31,.35); background: rgba(0,0,0,.03); min-width:240px;">
                <div style="color: rgba(61,43,31,.7); font-size:13px;">Mascots found</div>
                <div style="font-family:'Cinzel',serif; font-weight:700; font-size:1.25rem; color: rgba(61,43,31,.95);">
                  <span id="masCountBig">0</span> / 4
                </div>
              </div>
              <div style="padding:10px 12px; border-radius:16px; border:1px dashed rgba(61,43,31,.35); background: rgba(0,0,0,.03); min-width:240px;">
                <div style="color: rgba(61,43,31,.7); font-size:13px;">Bonus hint unlock</div>
                <div style="font-family:'Cinzel',serif; font-weight:700; font-size:1.25rem; color: rgba(61,43,31,.95);">
                  <span id="bonusHint">No</span>
                </div>
              </div>
            </div>
            <p class="micro">If you can read this, you‚Äôre already a pro hunter.</p>
          </div>
        </div>
      </div>

      <!-- REDEEM -->
      <div class="page" id="page-redeem">
        <div class="parchment">
          <div style="display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; padding:6px 8px 12px;">
            <div>
              <div style="font-family:'Cinzel',serif; font-weight:700; letter-spacing:.6px; font-size:1.2rem; color: rgba(61,43,31,.92);">
                Redeem Treasure
              </div>
              <div style="color: rgba(61,43,31,.65); font-size:.95rem;">
                Combine fragments + stamps to unlock rewards.
              </div>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn btnGhost" onclick="go('map')">Back to Map</button>
              <button class="btn btnGhost" onclick="go('gallery')">Back to Mascots</button>
            </div>
          </div>

          <div style="display:grid; gap:12px; grid-template-columns: repeat(3, 1fr);">
            <div style="border:1px dashed rgba(61,43,31,.35); border-radius:16px; padding:12px; background: rgba(0,0,0,.03);">
              <div style="font-family:'Cinzel',serif; color: var(--accent); font-weight:700;">Fragments</div>
              <div style="margin-top:6px; color: rgba(61,43,31,.75); font-size:.95rem;">
                A: <b id="fa">‚Äî</b><br>
                B: <b id="fb">‚Äî</b><br>
                C: <b id="fc">‚Äî</b>
              </div>
            </div>
            <div style="border:1px dashed rgba(61,43,31,.35); border-radius:16px; padding:12px; background: rgba(0,0,0,.03);">
              <div style="font-family:'Cinzel',serif; color: var(--accent); font-weight:700;">Mascot Stamps</div>
              <div style="margin-top:6px; color: rgba(61,43,31,.75); font-size:.95rem;">
                Found: <b id="masFoundRedeem">0</b>/4<br>
                VIP Bonus Hint: <b id="vipBonusRedeem">No</b>
              </div>
            </div>
            <div style="border:1px dashed rgba(61,43,31,.35); border-radius:16px; padding:12px; background: rgba(0,0,0,.03);">
              <div style="font-family:'Cinzel',serif; color: var(--accent); font-weight:700;">Crafted Code</div>
              <div style="margin-top:6px; color: rgba(61,43,31,.75); font-size:.95rem;">
                <span style="font-family:'Cinzel',serif; font-weight:700; font-size:1.2rem; letter-spacing:1px;" id="crafted">‚Äî</span>
              </div>
            </div>
          </div>

          <div class="redeem">
            <h2>Enter Voucher Code</h2>
            <div class="redeemRow">
              <input id="inputBox" type="text" placeholder="Ex: RICO77" autocomplete="off" />
              <button class="btn" id="btnDecrypt">OPEN CHEST</button>
            </div>
            <div style="margin-top:10px; color: rgba(61,43,31,.65); font-size:.95rem;">
              Tip: After collecting all 3 fragments, your crafted code will appear above.
            </div>
            <p class="micro">TINY_VOUCHER_2026</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

  <!-- BRIEF OVERLAY -->
  <div class="overlay" id="briefOverlay">
    <div class="modal">
      <header>
        <h3>üìú VIP Mission Briefing</h3>
        <p>
          Find <b>3 code fragments</b> in the Treasure Map and discover <b>4 hidden mascots</b>.
          Redeem your voucher and unlock the VIP reward chest.
        </p>
      </header>
      <div class="content">
        <div class="mcard"><b>Path A: Map</b><br>Tap hotspots A/B/C to collect fragments.</div>
        <div class="mcard"><b>Path B: Mascot Hunt</b><br>Each mascot found gives XP and a stamp. Collect all 4 for a bonus hint.</div>
        <div class="mcard"><b>VIP Tip</b><br>Use Hints wisely. Some clues are ‚Äúinvisible ink‚Äù ‚Äî highlight and click carefully.</div>
      </div>
      <footer>
        <button class="btn btnGhost" onclick="closeBrief()">Not now</button>
        <button class="btn" onclick="closeBrief(); toast('Mission started ‚Äî good luck, VIP!');">Start Mission</button>
      </footer>
    </div>
  </div>

  <!-- REWARD OVERLAY -->
  <div class="overlay" id="rewardOverlay">
    <div class="modal">
      <header>
        <h3>üí∞ Reward Unlocked üí∞</h3>
        <p id="rewardInfoTop" style="margin-top:8px;">You cracked the map. Claim your treasure.</p>
      </header>
      <div class="content" style="text-align:center;">
        <div class="chest"></div>
        <div class="rewardText" id="rewardInfo"></div>
        <div class="codebox" id="displayCode" title="Click to copy"></div>
        <div style="opacity:.75; font-size:12px;">(Click the code to copy)</div>
      </div>
      <footer>
        <button class="btn btnGhost" onclick="closeReward()">Continue Hunt</button>
        <button class="btn" onclick="claim()">CLAIM & SHOP</button>
      </footer>
    </div>
  </div>

  <script>
    /***********************
     * CONFIG ‚Äî EDIT REWARDS
     ***********************/
    const REWARDS = {
      // Crafted main code:
      "RICO77": "VIP DAY MAIN PRIZE ‚Äî RM50 CASH VOUCHER",

      // Optional extra / easter egg codes:
      "TINY_VOUCHER_2026": "BONUS ‚Äî FREE SHIPPING (NO MIN SPEND)",
      "VIPCHEST": "BONUS ‚Äî 30% OFF TOTAL BILL"
    };

    /***********************
     * STATE (saved in localStorage)
     ***********************/
    const STORAGE_KEY = "rico_vip_treasure_v1";

    const state = {
      xp: 0,
      lvl: 1,
      xpMax: 100,
      hintsLeft: 2,

      frags: { A:null, B:null, C:null }, // fragments
      mascots: { m1:false, m2:false, m3:false, m4:false } // stamps
    };

    const $ = (id) => document.getElementById(id);

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return;
        const parsed = JSON.parse(raw);
        Object.assign(state, parsed);
      }catch(e){}
    }
    function saveState(){
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }catch(e){}
    }

    /***********************
     * UI helpers
     ***********************/
    function toast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.classList.add("show");
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(()=> t.classList.remove("show"), 1800);
    }

    function normalize(s){ return String(s||"").trim().toUpperCase(); }

    function addXP(amount){
      state.xp = Math.max(0, state.xp + amount);
      while(state.xp >= state.xpMax){
        state.xp -= state.xpMax;
        state.lvl += 1;
        state.xpMax = Math.round(state.xpMax * 1.15);
        toast(`Level up! You are now Level ${state.lvl} ‚ú®`);
      }
      renderHUD();
      saveState();
    }

    function renderHUD(){
      $("lvl").textContent = state.lvl;
      $("xpTxt").textContent = state.xp;
      $("xpMaxTxt").textContent = state.xpMax;
      $("xpBar").style.width = Math.min(100, (state.xp/state.xpMax)*100) + "%";
      $("hintLeft").textContent = state.hintsLeft;

      const fragCount = (state.frags.A?1:0)+(state.frags.B?1:0)+(state.frags.C?1:0);
      $("fragCnt").textContent = fragCount;
      $("fragNeed").textContent = 3;

      const masCount = Object.values(state.mascots).filter(Boolean).length;
      $("masCnt").textContent = masCount;
      $("masNeed").textContent = 4;

      // Map UI states
      markHotspot("fragA", !!state.frags.A);
      markHotspot("fragB", !!state.frags.B);
      markHotspot("fragC", !!state.frags.C);

      setStepDone("stA", !!state.frags.A);
      setStepDone("stB", !!state.frags.B);
      setStepDone("stC", !!state.frags.C);
      setStepDone("stM", masCount >= 1);

      // Gallery UI
      setMascotFound("m1", state.mascots.m1);
      setMascotFound("m2", state.mascots.m2);
      setMascotFound("m3", state.mascots.m3);
      setMascotFound("m4", state.mascots.m4);

      $("masCountBig").textContent = masCount;
      $("bonusHint").textContent = masCount >= 4 ? "Yes" : "No";

      // Redeem UI
      $("fa").textContent = state.frags.A || "‚Äî";
      $("fb").textContent = state.frags.B || "‚Äî";
      $("fc").textContent = state.frags.C || "‚Äî";
      $("masFoundRedeem").textContent = masCount;
      $("vipBonusRedeem").textContent = masCount >= 4 ? "Yes" : "No";
      $("crafted").textContent = craftedCode() || "‚Äî";
    }

    function markHotspot(key, done){
      const el = key === "fragA" ? $("hsA") : key === "fragB" ? $("hsB") : $("hsC");
      if(!el) return;
      if(done) el.classList.add("done"); else el.classList.remove("done");
    }
    function setStepDone(id, done){
      const el = $(id);
      if(!el) return;
      if(done) el.classList.add("done"); else el.classList.remove("done");
    }
    function setMascotFound(id, found){
      const el = $(id);
      if(!el) return;
      if(found) el.classList.add("found"); else el.classList.remove("found");
    }

    function craftedCode(){
      if(state.frags.A && state.frags.B && state.frags.C){
        return `${state.frags.A}${state.frags.B}${state.frags.C}`.toUpperCase();
      }
      return "";
    }

    /***********************
     * Navigation (tabs)
     ***********************/
    function go(name){
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      const page = document.getElementById(`page-${name}`);
      if(page) page.classList.add("active");

      document.querySelectorAll(".tab").forEach(t => {
        t.classList.toggle("active", t.getAttribute("data-go") === name);
      });

      // Update redeem input with crafted code (nice UX)
      if(name === "redeem"){
        const code = craftedCode();
        if(code) $("inputBox").value = code;
      }
    }
    window.go = go;

    document.querySelectorAll(".tab").forEach(t => {
      t.addEventListener("click", () => go(t.getAttribute("data-go")));
    });

    /***********************
     * Map hotspots -> fragments
     ***********************/
    function collectFragment(which, value){
      if(state.frags[which]){
        toast(`Fragment ${which} already collected.`);
        return;
      }
      state.frags[which] = value;
      addXP(25);
      toast(`Collected Fragment ${which}: ${value}`);
      renderHUD();

      // If all fragments collected, nudge them
      if(craftedCode()){
        toast(`Crafted code ready: ${craftedCode()}`);
      }
      saveState();
    }

    // Hook map hotspots
    ["hsA","hsB","hsC"].forEach(id => {
      const el = $(id);
      el.addEventListener("click", () => {
        const frag = el.getAttribute("data-frag");
        const key = el.getAttribute("data-key"); // fragA/B/C
        const which = key === "fragA" ? "A" : key === "fragB" ? "B" : "C";
        collectFragment(which, frag);
      });
    });

    /***********************
     * Mascot click -> stamp
     ***********************/
    function collectMascot(mKey){
      if(state.mascots[mKey]){
        toast("Mascot already found.");
        return;
      }
      state.mascots[mKey] = true;
      addXP(20);
      toast("Mascot found! +20 XP");
      renderHUD();

      const masCount = Object.values(state.mascots).filter(Boolean).length;
      if(masCount === 4){
        // bonus hint
        state.hintsLeft += 1;
        toast("All mascots found! Bonus hint +1 üéâ");
      }
      saveState();
      renderHUD();
    }

    ["m1","m2","m3","m4"].forEach(id => {
      const el = $(id);
      el.addEventListener("click", (e) => {
        e.stopPropagation();
        const mKey = el.getAttribute("data-mkey");
        collectMascot(mKey);
      });
    });

    /***********************
     * Hint system
     ***********************/
    function showHint(){
      if(state.hintsLeft <= 0){
        toast("No hints left.");
        return;
      }
      state.hintsLeft -= 1;
      saveState();
      renderHUD();

      const fragCount = (state.frags.A?1:0)+(state.frags.B?1:0)+(state.frags.C?1:0);
      const masCount = Object.values(state.mascots).filter(Boolean).length;

      const hints = [];
      if(!state.frags.A) hints.push("Hint: Fragment A is near Monkey Mountain (left island).");
      if(!state.frags.B) hints.push("Hint: Fragment B is close to the route line near the center.");
      if(!state.frags.C) hints.push("Hint: Fragment C is around Danger Zone (right side).");
      if(masCount < 4) hints.push("Hint: Mascots are faint ‚Äî hover/tap around the corners in each scene.");

      const msg = hints.length ? hints[0] : "Hint: Try entering your crafted code on Redeem page.";
      const box = $("hintbox");
      box.style.display = "block";
      box.innerHTML = "<b>VIP Intel:</b> " + msg;
      toast("Hint used.");
    }
    $("btnHint").addEventListener("click", showHint);

    /***********************
     * Copy progress
     ***********************/
    async function copyProgress(){
      const masCount = Object.values(state.mascots).filter(Boolean).length;
      const fragCount = (state.frags.A?1:0)+(state.frags.B?1:0)+(state.frags.C?1:0);
      const crafted = craftedCode() || "(not ready)";
      const text =
`Rico.bet VIP Treasure Hunt Progress
Fragments: ${fragCount}/3  A:${state.frags.A||"-"} B:${state.frags.B||"-"} C:${state.frags.C||"-"}
Mascots: ${masCount}/4
Crafted Code: ${crafted}
Level: ${state.lvl}  XP: ${state.xp}/${state.xpMax}`;
      try{
        await navigator.clipboard.writeText(text);
        toast("Progress copied.");
      }catch{
        toast("Copy not supported here.");
      }
    }
    $("btnCopy").addEventListener("click", copyProgress);

    /***********************
     * Redeem / rewards
     ***********************/
    function openReward(code, rewardText){
      $("rewardInfoTop").textContent = "Treasure unlocked ‚Äî VIP reward ready.";
      $("rewardInfo").textContent = "Voucher found: " + rewardText;
      $("displayCode").textContent = code;
      $("rewardOverlay").classList.add("show");
      confettiBurst();
      addXP(10);
    }
    function closeReward(){
      $("rewardOverlay").classList.remove("show");
    }
    window.closeReward = closeReward;

    function check(){
      const val = normalize($("inputBox").value);
      if(!val){
        toast("Enter a code first.");
        return;
      }
      if(REWARDS[val]){
        openReward(val, REWARDS[val]);
      }else{
        toast("Access denied ‚Äî code not recognized.");
      }
    }

    $("btnDecrypt").addEventListener("click", check);
    $("inputBox").addEventListener("keydown", (e) => {
      if(e.key === "Enter") check();
    });

    $("displayCode").addEventListener("click", async () => {
      const code = $("displayCode").textContent.trim();
      if(!code) return;
      try{
        await navigator.clipboard.writeText(code);
        toast("Code copied!");
      }catch{
        toast("Copy not supported here.");
      }
    });

    function claim(){
      // Put your redeem/shop link here if you want:
      // window.location.href = "https://your-site.com/redeem";
      closeReward();
      toast("Claim recorded. Enjoy VIP Day!");
    }
    window.claim = claim;

    /***********************
     * Confetti (no libs)
     ***********************/
    function confettiBurst(){
      const count = 34;
      for(let i=0;i<count;i++){
        const p = document.createElement("div");
        p.style.position = "fixed";
        p.style.left = (window.innerWidth/2 + (Math.random()*240-120)) + "px";
        p.style.top = (window.innerHeight/2 + (Math.random()*80-40)) + "px";
        p.style.width = (6 + Math.random()*6) + "px";
        p.style.height = (10 + Math.random()*10) + "px";
        p.style.background = `hsl(${Math.floor(Math.random()*360)}, 85%, 60%)`;
        p.style.borderRadius = "4px";
        p.style.zIndex = 9999;
        p.style.opacity = "0.95";
        p.style.transform = `rotate(${Math.random()*360}deg)`;
        p.style.boxShadow = "0 12px 35px rgba(0,0,0,.35)";
        document.body.appendChild(p);

        const dx = (Math.random()*2-1) * 360;
        const dy = (Math.random()*-1) * 420 - 120;
        const dur = 900 + Math.random()*700;

        const start = performance.now();
        (function anim(t){
          const k = Math.min(1, (t-start)/dur);
          const ease = 1 - Math.pow(1-k, 3);
          p.style.transform = `translate(${dx*ease}px, ${dy*ease}px) rotate(${(360*ease)}deg)`;
          p.style.opacity = String(0.95 - k*0.95);
          if(k < 1) requestAnimationFrame(anim);
          else p.remove();
        })(start);
      }
    }

    /***********************
     * Brief + Reset
     ***********************/
    function openBrief(){ $("briefOverlay").classList.add("show"); }
    function closeBrief(){ $("briefOverlay").classList.remove("show"); }
    window.closeBrief = closeBrief;

    function resetGame(){
      state.xp = 0;
      state.lvl = 1;
      state.xpMax = 100;
      state.hintsLeft = 2;
      state.frags = { A:null, B:null, C:null };
      state.mascots = { m1:false, m2:false, m3:false, m4:false };
      saveState();
      renderHUD();
      $("hintbox").style.display = "none";
      $("hintbox").innerHTML = "";
      $("inputBox").value = "";
      toast("Mission reset.");
      go("home");
    }
    $("btnReset").addEventListener("click", resetGame);
    $("btnBrief").addEventListener("click", openBrief);

    /***********************
     * Init
     ***********************/
    loadState();
    renderHUD();
    openBrief();
  </script>
</body>
</html>
